SET DATEFORMAT ymd
GO
CREATE DATABASE QUAN_LY_DOAN_VIEN
USE QUAN_LY_DOAN_VIEN
--Bang doan co so
CREATE TABLE DOANCOSO
(
    MADOANCOSO CHAR(10) NOT NULL UNIQUE,--unique: du lieu nhap vao la duy nhat, khong trung lap
    TENDOANCOSO NVARCHAR(50)
    PRIMARY KEY(MADOANCOSO)
)
GO
CREATE TABLE CHIDOAN
(
    MACHIDOAN CHAR(10) NOT NULL UNIQUE,
    TENCHIDOAN NVARCHAR(50),
    MADOANCOSO CHAR(10)--Khoa ngoai
    PRIMARY KEY(MACHIDOAN)--khoa chinh
)
GO
CREATE TABLE DOANVIEN
(
    MASV CHAR(10) NOT NULL UNIQUE,
    HOTEN NVARCHAR(50) NOT NULL,
    NGSINH DATETIME,
    DIACHI NVARCHAR(20),
    GIOITINH NVARCHAR(10) CHECK(GIOITINH = N'Nam'OR GIOITINH = N'Nữ'),
    DOANVIEN_QL CHAR(10),--Quan he de quy
    PRIMARY KEY(MASV),--khoa chinh
    --Khoa Ngoai: MaCD, MaDG
    MACHIDOAN char(10),
    -- MADANHGIA CHAR(10) NOT NULL  
)
GO
CREATE TABLE SODOAN
(
    MASODOAN CHAR(20) NOT NULL PRIMARY KEY,
    TENLOP NVARCHAR(50),
    NIENKHOA CHAR(15),
    --Khoa Ngoai: MSV
    MASV CHAR(10) NOT NULL 
)
GO
CREATE TABLE DANHGIA
(
    MADANHGIA CHAR(10) NOT NULL UNIQUE,
    UU_KHUYETDIEM NVARCHAR(100),
    XEPLOAI NVARCHAR(10) NOT NULL,
    HOCKI INT CHECK( HOCKI = 1 OR HOCKI = 2)
    PRIMARY KEY(MADANHGIA),
    MASODOAN CHAR(20)--khoa ngoai
)
GO
CREATE TABLE HOATDONG
(
    MAHOATDONG CHAR(10) NOT NULL,
    TENHOATDONG NVARCHAR(100),
    NGAYTHAMGIA DATETIME,
    SOLUONG int CHECK(SOLUONG>5) 
    PRIMARY KEY(MAHOATDONG)
)
GO
CREATE TABLE ĐV_THAMGIA
(
    MASV CHAR(10) NOT NULL,
    MAHOATDONG CHAR(10) NOT NULL
    PRIMARY KEY(MASV, MAHOATDONG)
)
GO
CREATE TABLE SODIENTHOAI
(
    MASV CHAR(10) NOT NULL,
    SODIENTHOAI VARCHAR(11)
    PRIMARY KEY(MASV, SODIENTHOAI)
)
CREATE TABLE DIADIEM
(
    MAHOATDONG CHAR(10) NOT NULL,
    DIADIEM NVARCHAR(50) NOT NULL
    PRIMARY KEY(MAHOATDONG,DIADIEM)
)
GO

--Tao KHOA NGOAI
--CHIDOAN
ALTER TABLE dbo.CHIDOAN ADD CONSTRAINT MaDCS_FK FOREIGN KEY(MADOANCOSO) REFERENCES DoanCoSo(MADOANCOSO)
--DOANVIEN: Khoa ngoai macd va hoc ki
 ALTER TABLE dbo.DOANVIEN ADD CONSTRAINT MaCD_FK FOREIGN KEY(MACHIDOAN) REFERENCES dbo.CHIDOAN(MACHIDOAN)
--SODOAN
 ALTER TABLE dbo.SODOAN ADD CONSTRAINT MASV_FK FOREIGN KEY(MASV) REFERENCES dbo.DOANVIEN(MASV)
--DanhGia
ALTER TABLE dbo.DANHGIA ADD CONSTRAINT MASD_FK FOREIGN KEY(MASODOAN) REFERENCES dbo.SODOAN(MASODOAN)
--INSERT DATA
INSERT INTO DOANCOSO
VALUES
    ('DCS1', N'Công Nghệ Thông Tin' ),
    ('DCS2', N'Công Nghệ Ô Tô'),
    ('DCS3', N'Ngôn Ngữ Anh' ),
    ('DCS4', N'Cơ Khí' ),
    ('DCS5', N'kiến Trúc' ),
    ('DCS6', N'Kế Toán' ),
    ('DCS7', N'Maketing' ),
    ('DCS8', N'Tài Chính Ngân Hàng' ),
    ('DCS9', N'Quản Trị Kinh Doanh' ),
    ('DCS10',N'Kĩ Thuật Điện Tư - Viễn Thông' );
--DELETE dbO.DoanCoSo
GO
INSERT INTO CHIDOAN
VALUES
    ('CD1.1', N'Công Nghệ Thông Tin ', 'DCS1' ),
    ('CD4', N'Maketing', 'DCS7' ),
    ('CD2', N'Kế Toán', 'DCS6' ),
    ('CD1.2', N'Công Nghệ Thông Tin', 'DCS1' ),
    ('CD6.1', N'Quản Trị Kinh Doanh', 'DCS9' ),
    ('CD3.1', N'Cơ Khí ', 'DCS4' ),
    ('CD9', N'kĩ Thuật Điện Tử - Viễn Thông', 'DCS10'),
    ('CD3.2', N'Cơ Khí ', 'DCS4' ),
    ('CD11', N'Công Nghệ Ô Tô', 'DCS2' ),
    ('CD10', N'Tài Chính Ngân Hàng', 'DCS8'),
    ('CD3.3', N'Cơ Khí', 'DCS4' ),
    ('CD1.3', N'Công Nghệ Thông Tin', 'DCS1'),
    ('CD7', N'Kinh Tế Vận Tải', 'DCS3' ),
    ('CD8', N'Kiến Trúc', 'DCS5' ),
    ('CD6.2', N'Quản Trị Kinh Doanh', 'DCS9' );
GO
--DELETE dbo.CHIDOAN
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, MACHIDOAN)
VALUES('k185076013',N'Trần Thị Ngọc','1995/04/03', N'Hồ Chí Minh', N'Nữ', 'CD1.1')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, MACHIDOAN)
VALUES('k195072443',N'Nguyễn Ngoc Anh','1996/03/04', N'Hồ Chí Minh', N'Nữ', 'CD1.1')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, DOANVIEN_QL,MACHIDOAN)
VALUES('k182738282',N'Trần Việt Hương','1999/06/09', N'Bình Định', N'Nữ','k141010132','CD8')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, DOANVIEN_QL, MACHIDOAN)
VALUES('k185107101',N'Võ Thanh Hưng','2000/05/03', N'Quảng Nam', N'Nam', 'k185076013','CD1.1')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, DOANVIEN_QL, MACHIDOAN)
VALUES('k191042101',N'Phan Văn Minh','2001/12/05', N'Hà Tĩnh', N'Nam', 'k195072443', 'CD11')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, MACHIDOAN)
VALUES('k175076013',N'Trần Tú Trinh','2000/03/24', N'Hồ Chí Minh', N'Nữ','CD1.2')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, MACHIDOAN)
VALUES('k187282019',N'Hồ Văn Quân','1998/01/09', N'Hồ Chí Minh', N'Nam', 'CD7')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, MACHIDOAN)
VALUES('k181010132',N'Võ Văn Anh','2000/11/27', N'Đà Nẵng', N'Nam','CD8')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, DOANVIEN_QL, MACHIDOAN)
VALUES('K197294267', N'Đặng Thị Vân','2001/08/12', N'Hà Tĩnh', N'Nữ', 'K195072443', 'CD11')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, DOANVIEN_QL, MACHIDOAN)
VALUES('K194839437', N'Vũ Văn Thanh','2001/09/24', N'Nghệ An', N'Nam', 'k187282019', 'CD7')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH,MACHIDOAN)
VALUES('K174839437', N'Phan Thanh Hậu','1999/03/12', N'Quảng Ngãi', N'Nam', 'CD2')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, DOANVIEN_QL, MACHIDOAN)
VALUES('K178729042', N'Phạm Thu Hoài','1999/09/03', N'Bình Định', N'Nữ', 'K174839437', 'CD2')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH,MACHIDOAN)
VALUES('K188292024', N'Phạm Thanh Thuý','2000/10/23', N'Gia Lai', N'Nữ','CD10')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH, DOANVIEN_QL, MACHIDOAN)
VALUES('K182294824', N'Lê Thị Hồng','1999/07/24', N'Quảng Nam', N'Nữ', 'K188292024', 'CD10')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH,MACHIDOAN)
VALUES('K165265734', N'Lê Văn Sơn','1998/11/02', N'Quảng Nam', N'Nam','CD4')
INSERT INTO DOANVIEN(MASV, HOTEN, NGSINH, DIACHI, GIOITINH,MACHIDOAN)
VALUES('K170039242', N'Lê Thị Nam','1997/11/02', N'Đồng Nai', N'Nữ','CD6.2')
--SODOAN
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD1',N'Công Nghệ Thông Tin','2018-2023','k185107101')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD2',N'Công Nghệ Ô Tô','2019-2024','K197294267')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD3',N'Kinh Vận Tải','2018-2023','k187282019')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD24',N'Công Nghệ Thông Tin','2017-2021','k175076013')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD9',N'Kế Toán','2017-2021','K178729042')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD4',N'Cơ Khí','2016-2020','K165265734')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD10',N'Kế Toán','2017-2021','K174839437')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD12',N'Kiến Trúc','2014-2018','k182738282')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD102',N'Kiến Trúc','2018-2023','k181010132')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD132',N'Công Nghệ Ô Tô','2019-2024','k191042101')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD163',N'Tài Chính Ngân Hàng','2018-2023','K188292024')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD134',N'Công Nghệ Ô Tô','2018-2023','K182294824')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD72',N'Quản Trị Kinh Doanh','2016-2021','K170039242')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD1102',N'Công Nghệ Thông Tin ','2016-2020','k185076013')
INSERT INTO SODOAN(MASODOAN,TENLOP, NIENKHOA, MASV)
VALUES('SD2011',N'Kinh Tế Vận Tải','2016-2020','K194839437')
--DELETE dbo.SODOAN
--Đánh Gía

INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG001', N'Thực hiện đầy đủ nhiệm vụ', N'khá', 1, 'SD1')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG002', N'Có ý thức thực hiện nhiệm vụ',N'Trung Bình', 2, 'SD2')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG003', N'Có ý thức thực hiện nhiệm vụ',N'Trung bình', 2, 'SD10')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG004', N'Hoàn thành xuất sắc nhiệm vụ',N'Xuất sắc', 1, 'SD3')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG005', N'Thực hiện đầy đủ nhiệm vụ',N'khá',  2, 'SD4')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG006', N'Hoàn thành xuất sắc nhiệm vụ',N'Xuất Sắc', 2,  'SD9')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG007', N'Hoàn thành xuất sắc nhiệm vụ',N'Xuất Sắc', 1,'SD12')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG008', N'Không hoàn thành nhiệm vụ',N'Kém', 1, 'SD134')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ( 'DG0010', N'Có ý thức thực hiện nhiệm vụ',N'Trung Bình', 2, 'SD163')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG009', N'Thực hiện đầy đủ nhiệm vụ',N'Khá', 1,  'SD102')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG0014', N'Hoàn thành xuất sắc nhiệm vụ',N'Xuất Sắc', 1,  'SD24')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG0012', N'Thực hiện đầy đủ nhiệm vụ',N'Khá', 1,  'SD132')
INSERT INTO DANHGIA(MADANHGIA, UU_KHUYETDIEM, XEPLOAI, HOCKI, MASODOAN)
VALUES ('DG0013', N'Ko hoàn thành nhiệm vụ',N'Kém', 1,  'SD72')
--delete dbo.DANHGIA
--Hoạt động
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG ,NGAYTHAMGIA, SOLUONG)
VALUES('HD001', N'Mùa Hè Xanh', '2020/03/03', 133)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD002', N'Âm Nhạc Dân Tộc Học Đường', '2020/05/20', 203)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD003', N'Tuổi Trẻ Chung Tay Xây Dựng Nông Thôn Mới', '2020/03/26', 228)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD004', N'Festival sáng tạo trẻ', '2020/03/03', 293)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD005', N'Giải thể thao Sinh viên Việt Nam - VUG', '2019/12/26', 489)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD006', N'Thủ lĩnh sinh viên', '2020/11/24', 193)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD007', N'Chương trình tiếp sức mùa thi', '2020/06/02', 732)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD008', N'Cuộc thi ý tưởng sáng tạo khởi nghiệp sinh viên "Start-up Student Ideas" ', '2020/11/19', 348)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD009', N'Festival thanh niên, sinh viên Việt Nam','2020/05/29', 535)
INSERT INTO HOATDONG(MAHOATDONG, TENHOATDONG, NGAYTHAMGIA, SOLUONG)
VALUES('HD0010', N'Hiến Máu Tình Nguyện','2020/11/20', 244)
--delete HOATDONG
--Tham Gia
INSERT INTO ĐV_THAMGIA(MASV,MAHOATDONG)
VALUES('k185107101','HD0010')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('k187282019','HD007')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('k175076013','HD001')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('K178729042','HD002')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('K174839437','HD006')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('K197294267','HD003')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('k187282019','HD003')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('k185107101','HD002')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('K182294824','HD006')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('k175076013','HD009')
INSERT INTO ĐV_THAMGIA(MASV, MAHOATDONG)
VALUES('K197294267','HD009')
--Dien Thoai
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('k175076013', '0838912425')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('K182294824', '0903123123')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('K197294267', '0913454545')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('k185107101', '0838121212')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('k187282019', '0903656565')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('K174839437', '0937125125')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('k185107101', '0937888888')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('K197294267', '0653717171')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('k175076013', '0913232323')
INSERT INTO SODIENTHOAI( MASV, SODIENTHOAI)
VALUES ('K197294267', '0373216416')
--Địa Điểm
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD001',N'Nha Trang')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD002',N'Hội Trường C2')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD003',N'Quận 1')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD004',N'Quận 10')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD005',N'Quận 9')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD006',N'Quận 6')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD007',N'Quận 9')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD008',N'Kí Túc Xá ĐH GTVT')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD009',N'Thủ Đức')
INSERT INTO DIADIEM(MAHOATDONG,DIADIEM)
VALUES ('HD0010',N'Quận 11')
--delete dbo.DIADIEM
select * from CHIDOAN
select * from DANHGIA
select * from DIADIEM
select * from DOANCOSO
select * from ĐV_THAMGIA
select * from HOATDONG
select * from SODIENTHOAI
select * from SODOAN
select * from DOANVIEN